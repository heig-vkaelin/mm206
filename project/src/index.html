<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Valentin Kaelin" />
    <meta name="author" content="Francesco Monti" />
    <meta name="description" content="MM206 - Project" />
    <title>Categories - Helseflora</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/pages/homepage.css" />
  </head>

  <body>
    <header class="website-header">
      <a class="website-nav" href="index.html">
        <img class="website-logo" src="images/logo.png" alt="Helseflora logo" />
        <h2 class="website-title">Helseflora</h2>
      </a>
      <a href="cart.html" id="cart" class="btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
          <path
            d="M24 0C10.7 0 0 10.7 0 24S10.7 48 24 48H76.1l60.3 316.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H179.9l-9.1-48h317c14.3 0 26.9-9.5 30.8-23.3l54-192C578.3 52.3 563 32 541.8 32H122l-2.4-12.5C117.4 8.2 107.5 0 96 0H24zM176 512c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm336-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48z"
          />
        </svg>
      </a>
    </header>
    <main class="container">
      <div class="title-container">
        <h1 class="page-title">Categories</h1>
        <div>
          <form class="search-plant">
            <input type="text" name="search" id="search" class="input-inline" placeholder="Search for a plant" />
            <button class="btn btn-primary btn-sm">Search</button>
          </form>
        </div>
      </div>
      <div id="categories" class="card"></div>
      <div class="auth-card">
        <div class="item left">
          <span class="icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"
              ></path>
            </svg>
          </span>
          <div class="content">
            <h3>
              <a href="register.html">
                <span class="clickable" aria-hidden="true"></span>
                Register
              </a>
            </h3>
            <p class="description">Register here to be able to add comments, see more plants and more!</p>
          </div>
          <span class="arrow-icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M20 4h1a1 1 0 00-1-1v1zm-1 12a1 1 0 102 0h-2zM8 3a1 1 0 000 2V3zM3.293 19.293a1 1 0 101.414 1.414l-1.414-1.414zM19 4v12h2V4h-2zm1-1H8v2h12V3zm-.707.293l-16 16 1.414 1.414 16-16-1.414-1.414z"
              ></path>
            </svg>
          </span>
        </div>
        <div class="item right">
          <span class="icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              aria-hidden="true"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"
              ></path>
            </svg>
          </span>
          <div class="content">
            <h3>
              <a href="login.html">
                <span class="clickable" aria-hidden="true"></span>
                Login
              </a>
            </h3>
            <p class="description">Login to an existing account.</p>
          </div>
          <span class="arrow-icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M20 4h1a1 1 0 00-1-1v1zm-1 12a1 1 0 102 0h-2zM8 3a1 1 0 000 2V3zM3.293 19.293a1 1 0 101.414 1.414l-1.414-1.414zM19 4v12h2V4h-2zm1-1H8v2h12V3zm-.707.293l-16 16 1.414 1.414 16-16-1.414-1.414z"
              ></path>
            </svg>
          </span>
        </div>
      </div>
    </main>

    <script type="module">
      import { fetchAPI, ENDPOINTS } from './services/api.js';

      const container = document.querySelector('#categories');
      const searchForm = document.querySelector('.search-plant');

      async function main() {
        const { data: categories } = await fetchAPI(ENDPOINTS.CATEGORIES);
        console.log(categories);
        displayCategories(categories);

        searchForm.addEventListener('submit', (e) => {
          e.preventDefault();
          searchPlants();
        });
      }

      function displayCategories(categories) {
        for (const category of categories) {
          const categoryLink = document.createElement('a');
          categoryLink.classList.add('category');
          categoryLink.innerText = category.name;
          categoryLink.href = `plants.html?category=${category.id}`;
          container.appendChild(categoryLink);
        }
      }

      function searchPlants() {
        const search = document.querySelector('#search').value;
        window.location.href = `plants.html?search=${search}`;
      }

      main();
    </script>
  </body>
</html>
